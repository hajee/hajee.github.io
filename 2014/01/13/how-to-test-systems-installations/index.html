
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>How to test systems installations - People & Software</title>
  <meta name="author" content="Bert Hajee">
  <meta name="twitter:widgets:csp" content="on">

  
  <meta name="description" content="How to test your systems installations">
  <meta name="keywords" content="devops, puppet, continuous deployment, infastructure testing, rspec, ruby">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://hajee.github.io/2014/01/13/how-to-test-systems-installations/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="People & Software" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-45679728-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">People & Software</a></h1>
  <h2>My ramblings on people using software</h2>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss email">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
    <li><a href="http://eepurl.com/LOXpn" rel="subscribe-email" title="subscribe via email">Email</a></li>
  
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">How to Test Systems Installations</h1>
    
  </header>




<span class="categories">
  
    <a class='category' href='/blog/categories/devops/'>devops</a>, <a class='category' href='/blog/categories/rspec/'>rspec</a>, <a class='category' href='/blog/categories/ruby/'>ruby</a>, <a class='category' href='/blog/categories/testing/'>testing</a>
  
</span>


<div class="entry-content"><p>Just imagine yourself installing a Linux system with an Oracle database and a WebLogic application server. There are a lot of manual steps that have to be taken. A lot of commands to be typed and a lot of configurations to be set right in order to get the perfect system for the application. A lot of things can go wrong. You can miss a configuration setting. You can forget a command. Hopefully you get an error message because you did something wrong, but it can also turn out te be a silent error. One you only see after you have given the system to the application developers, or worse one that only comes out after the system is running in production and some load is put onto it. Hoe do we make sure a system is correct after the installation. In this blog post,  I will describe how we used Rspec to test out installations.</p>

<!-- more -->


<h2>How it&rsquo;s done mostly</h2>

<p>In the area&rsquo;s of interest for continuous deployment, testing is a separate topic. Although testing  has become mainstream in regular software development, testing isn&rsquo;t really that mainstream when it comes to environments and deployments. Certainly not automated testing. Most of the times, the operations guy checks a couple of items on a checklist. Does the system boot well? Are there any error messages during the boot? Can I log in as root? Can I ping to the router? Can I connect to the database? All good tests, but hardly sufficient.</p>

<h2>It&rsquo;s quite big and complex</h2>

<p>Actualy te be certain a system is installed correctly, is a rather complex and big task. There are numerous configuration files and settings. Every individual setting might cause the system to misbehave. Not only that, but the settings are also interrelated. Sometimes, if I change setting X, then I must also change setting Y. If for example I change the hostname of a Linux system, I might also have to change the hostname for the web server.</p>

<p>From research,  we know that the human brain is very powerful. But it lacks the capacity to see and manage a lot of intricate small little details. So even a very clever devops engineer can easily forget the extra change in setting Y after he changes setting X.</p>

<h2>how can we manage?</h2>

<p>We could of course after an installation have QA check all settings. Because there are so many of the small little, but important settings, this would become a very labour intensive task. Not to mention a tedious and an error prone task. We need help. Just like in regular software development, we need to test our units with automated tests. The units can be the different kinds of settings. In the figure below you see an extract of running a unit-test for  a Linux installation.</p>

<p><img src="/images/rspec_output.png" title="Part of an Rspec report on an installation" ></p>

<h2>What tools do we need?</h2>

<p>The market for testing tools for regular software is crowded. A lot of good tools and frameworks exist for that kind of work. The market for testing tools for devops is a lot more dense. We decided to use <a href="https://relishapp.com/rspec">RSpec</a> a tool mostly used in behaviour driven software development in the <a href="https://www.ruby-lang.org/en/">Ruby world</a>. We choose Rspec because of these reasons:</p>

<ul>
<li>After a small test, it really seemed to fit</li>
<li>It is not only great as a test tool but even better as a communication tool (more on that later)</li>
<li>It is open source and therefore we don&rsquo;t need any expensive license</li>
<li>It has a large and vibrant user community</li>
<li>Because we were aiming at using <a href="http://puppetlabs.com/puppet/puppet-enterprise">Puppet</a>, we needed Ruby on our systems anyway.</li>
</ul>


<h2>Communication</h2>

<p>One of the best things of RSpec is the clarity of its reporting. We noticed that the RSpec reports, where a means of discussion between the different stakeholders. In the past,  we&rsquo;d have these vague discussions about a setting. Not all stakeholders new what the setting meant and why it was setup this way. After using RSpec, all of a sudden, we could pinpoint a certain setting and have a meaningful discussion about the reason of the setting and the actual value.</p>

<h2>How we use it?</h2>

<p>Like I explained before, we are using the automated tests to check our settings. This means we mostly do checks on those sometimes we do a little bit more. For example, when we check the settings of the DNS resolver on a system, it is quite easy to extend the test to do a lookup and a reverse lookup to assess if it is really working.</p>

<p>On the other hand, if a new package solves a certain bug, it is easy to test if a certain version of that package is installed =, but quite hard to simulate the bug te check if it is actually solved. So we don&rsquo;t do that.</p>

<h2>Is the test sufficient?</h2>

<p><strong>NO</strong> definitely not. Just like the unit-tests of a regular application is insufficient. the RSpec tests are just a first kind of smoke test. But we noticed it is a very valuable one. After the RSpec tests are done, you still need acceptance and integration tests. Preferably with the application and all related middleware installed.</p>

<h2>Next&hellip;</h2>

<p>In the <a href="/2014/01/18/testing-your-system-installation-with-rspec/">next blog post</a>  I will explain how we have structured our Rspec code.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Bert Hajee</span></span>

      








  


<time datetime="2014-01-13T20:14:10+01:00" pubdate data-updated="true">Jan 13<span>th</span>, 2014</time>
    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://hajee.github.io/2014/01/13/how-to-test-systems-installations/" data-via="bhajee" data-counturl="http://hajee.github.io/2014/01/13/how-to-test-systems-installations/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2013/12/30/puppet-building-blocks/" title="Previous Post: Puppet building blocks">&laquo; Puppet building blocks</a>
      
      
        <a class="basic-alignment right" href="/2014/01/18/testing-your-system-installation-with-rspec/" title="Next Post: Testing your system installation with RSpec">Testing your system installation with RSpec &raquo;</a>
      
    </p>
  </footer>
</article>

<article class="archives">
  <div class="related-posts">
    <h2>Related Posts</h2>
    
      <article>
        <h3 class="title"><a href="/2014/01/18/testing-your-system-installation-with-rspec/">Testing your system installation with RSpec</a></h3>
        <div class="meta">
            
        </div>
      </article>
    
      <article>
        <h3 class="title"><a href="/2014/01/26/puppet-custom-types-the-easy-way/">Puppet Custom Types, the easy way</a></h3>
        <div class="meta">
            
        </div>
      </article>
    
  </div>
</article>


  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    
<section>
  <h1>About me</h1>
  <ul id="my_info">
      <li class="gravator">
				<img src="http://www.gravatar.com/avatar/3d00c6d5e4c56164f44f1fc96a1027ef?s=150" alt="Gravatar of Bert Hajee " title="Gravatar of Bert Hajee" />
      </li>
      <li class="name">
        <a href="/about">Bert Hajee</a>
      </li>
  </ul>
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2014/02/23/using-puppet-to-manage-oracle/">Using Puppet to manage Oracle</a>
      </li>
    
      <li class="post">
        <a href="/2014/02/08/puppet-custom-types-the-easy-way-part-2/">Puppet Custom Types, the easy way (part 2)</a>
      </li>
    
      <li class="post">
        <a href="/2014/01/26/puppet-custom-types-the-easy-way/">Puppet Custom Types, the easy way</a>
      </li>
    
      <li class="post">
        <a href="/2014/01/18/testing-your-system-installation-with-rspec/">Testing your system installation with RSpec</a>
      </li>
    
      <li class="post">
        <a href="/2014/01/13/how-to-test-systems-installations/">How to test systems installations</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/hajee">@hajee</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'hajee',
            count: 5,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Bert Hajee -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'hajee';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://hajee.github.io/2014/01/13/how-to-test-systems-installations/';
        var disqus_url = 'http://hajee.github.io/2014/01/13/how-to-test-systems-installations/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/javascripts/aharris.js"></script>

</body>
</html>
