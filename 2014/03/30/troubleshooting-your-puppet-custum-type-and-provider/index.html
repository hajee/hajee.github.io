
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>troubleshooting your Puppet custom type and provider - People & Software</title>
  <meta name="author" content="Bert Hajee">
  <meta name="twitter:widgets:csp" content="on">

  
  <meta name="description" content="troubleshooting your Puppet custom type and provider">
  <meta name="keywords" content="devops, continuous deployment, infastructure puppet, easy_type, ruby, oracle">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://hajee.github.io/2014/03/30/troubleshooting-your-puppet-custum-type-and-provider/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="People & Software" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-45679728-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">People & Software</a></h1>
  <h2>My ramblings on people using software</h2>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss email">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
    <li><a href="http://eepurl.com/LOXpn" rel="subscribe-email" title="subscribe via email">Email</a></li>
  
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Troubleshooting Your Puppet Custom Type and Provider</h1>
    
  </header>




<span class="categories">
  
    <a class='category' href='/blog/categories/devops/'>devops</a>, <a class='category' href='/blog/categories/puppet/'>puppet</a>, <a class='category' href='/blog/categories/ruby/'>ruby</a>
  
</span>


<div class="entry-content"><p>Not again&hellip;.! This custom type and provider stuff had gotten under Tim&rsquo;s skin. Somehow it just kept giving errors. Not only errors, but error&rsquo;s Tim could not pinpoint.</p>

<p>Coming from a sysadmin background, jumping into Puppet was already a big jump, but getting into ruby programming proved an even bigger jump. Tim really wanted to get this working. If he were able to pull it of, he would get extremelyy nice and readable Puppet manifests.
If you recognise this cry for help, check out this article. In the article we will show you all the tricks to get up to speed in debugging your custom Puppet types and providers.</p>

<!-- more -->


<h2>Where to look</h2>

<p>One of the things that bothered Tim, was that he had no clue where to look. Puppet just handed him an error.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Error: Could not prefetch your_custom_type provider 'your_provider': undefined method `length' for nil:NilClass</span></code></pre></td></tr></table></div></figure>


<p>Although Puppet told him, it was in his custom_type (<code>your_custom_type</code>) and in his provider (<code>your_provider</code>), this was nowhere precice enough to get going. BeeÃ«ing a <code>NillClass</code> exception didn&rsquo;t help either. There was no variable name to start looking for.</p>

<p>In most other programming languages Tim had worked with, there was a notion of a stack trace. In this trace he would be able to see the context where the error occurred.</p>

<p>After Googleing around, Tim found that ruby normaly print&rsquo;s a stack trace as well. It looked like Puppet was catching the error&rsquo;s and supressing the stack trace. Luckily, Tim found a command line option for Puppet to enable the stack trace.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>puppet apply your_manifest.pp --trace
</span></code></pre></td></tr></table></div></figure>


<p>No clue&rsquo;s to where</p>

<h2>Getting into the debugger</h2>

<h2>What to do in the debugger</h2>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Bert Hajee</span></span>

      








  


<time datetime="2014-03-30T22:31:44+02:00" pubdate data-updated="true">Mar 30<span>th</span>, 2014</time>
    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://hajee.github.io/2014/03/30/troubleshooting-your-puppet-custum-type-and-provider/" data-via="bhajee" data-counturl="http://hajee.github.io/2014/03/30/troubleshooting-your-puppet-custum-type-and-provider/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2014/02/23/using-puppet-to-manage-oracle/" title="Previous Post: Using Puppet to manage Oracle">&laquo; Using Puppet to manage Oracle</a>
      
      
        <a class="basic-alignment right" href="/2014/06/26/pietros-puppet-pizza-place-1/" title="Next Post: Learning Puppet at the Puppet Pizza Place">Learning Puppet at the Puppet Pizza Place &raquo;</a>
      
    </p>
  </footer>
</article>

<article class="archives">
  <div class="related-posts">
    <h2>Related Posts</h2>
    
      <article>
        <h3 class="title"><a href="/2014/06/26/pietros-puppet-pizza-place-1/">Learning Puppet at the Puppet Pizza Place</a></h3>
        <div class="meta">
            
        </div>
      </article>
    
      <article>
        <h3 class="title"><a href="/2014/02/23/using-puppet-to-manage-oracle/">Using Puppet to manage Oracle</a></h3>
        <div class="meta">
            
        </div>
      </article>
    
  </div>
</article>


</div>

<aside class="sidebar">
  
    
<section>
  <h1>About me</h1>
  <ul id="my_info">
      <li class="gravator">
				<img src="http://www.gravatar.com/avatar/3d00c6d5e4c56164f44f1fc96a1027ef?s=150" alt="Gravatar of Bert Hajee " title="Gravatar of Bert Hajee" />
      </li>
      <li class="name">
        <a href="/about">Bert Hajee</a>
      </li>
  </ul>
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2014/06/26/pietros-puppet-pizza-place-1/">Learning Puppet at the Puppet Pizza Place</a>
      </li>
    
      <li class="post">
        <a href="/2014/03/30/troubleshooting-your-puppet-custum-type-and-provider/">troubleshooting your Puppet custom type and provider</a>
      </li>
    
      <li class="post">
        <a href="/2014/02/23/using-puppet-to-manage-oracle/">Using Puppet to manage Oracle</a>
      </li>
    
      <li class="post">
        <a href="/2014/02/08/puppet-custom-types-the-easy-way-part-2/">Puppet Custom Types, the easy way (part 2)</a>
      </li>
    
      <li class="post">
        <a href="/2014/01/26/puppet-custom-types-the-easy-way/">Puppet Custom Types, the easy way</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/hajee">@hajee</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'hajee',
            count: 5,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Bert Hajee -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/javascripts/aharris.js"></script>

</body>
</html>
